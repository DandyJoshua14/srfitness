{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/actions.ts"],"sourcesContent":["\n'use server';\n\nimport { z } from 'zod';\nimport { addNomination } from '@/services/firestore';\nimport { Resend } from 'resend';\nimport { redirect } from 'next/navigation';\n\n// Explicitly read environment variables at the top level\nconst NEXT_PUBLIC_BASE_URL = process.env.NEXT_PUBLIC_BASE_URL || 'http://localhost:9002';\nconst RESEND_API_KEY = process.env.RESEND_API_KEY;\nconst PAYSTACK_SECRET_KEY = process.env.PAYSTACK_SECRET_KEY;\n// We will read the Zapier URL inside the function to ensure it's not missed.\n\nconst nominationFormSchema = z.object({\n  category: z.string(),\n  nomineeName: z.string(),\n  nomineePhone: z.string(),\n  nominationReason: z.string(),\n  nominatorName: z.string(),\n  nominatorPhone: z.string(),\n});\n\nconst voteSchema = z.object({\n  contestantId: z.string(),\n  contestantName: z.string(),\n  contestantCategory: z.string(),\n  numberOfVotes: z.number().int().positive(),\n});\n\nconst remitaPaymentRequestSchema = z.object({\n  amount: z.number(),\n  charge: z.number(),\n  transactionReference: z.string(),\n  customerEmail: z.string().email(),\n  customerName: z.string(),\n  customerPhoneNumber: z.string(),\n  description: z.string(),\n  // Pass along vote data for recording\n  contestantId: z.string(),\n  contestantName: z.string(),\n  contestantCategory: z.string(),\n  numberOfVotes: z.number(),\n});\n\nconst remitaReceiptSchema = z.object({\n  rrr: z.string(),\n});\n\nconst remitaRrrValidationSchema = z.object({\n  rrr: z.string(),\n  channelId: z.string(),\n});\n\nconst paystackPaymentRequestSchema = z.object({\n  email: z.string().email(),\n  amount: z.number(),\n  metadata: z.object({\n    contestantId: z.string(),\n    contestantName: z.string(),\n    contestantCategory: z.string(),\n    numberOfVotes: z.number(),\n  }),\n});\n\n\nexport async function sendNominationEmail(formData: z.infer<typeof nominationFormSchema>) {\n  const validatedFields = nominationFormSchema.safeParse(formData);\n\n  if (!validatedFields.success) {\n    return { success: false, error: 'Invalid form data.' };\n  }\n  \n  try {\n    const { category, nomineeName, nomineePhone, nominationReason, nominatorName, nominatorPhone } = validatedFields.data;\n\n    // 1. Attempt to send email\n    if (RESEND_API_KEY) {\n      const resend = new Resend(RESEND_API_KEY);\n      const { data, error } = await resend.emails.send({\n        from: 'SR Fitness Awards <noreply@srfitness.com.ng>',\n        to: ['sampson07@outlook.com', 'srfitness247@gmail.com'],\n        subject: 'New Award Nomination Received!',\n        html: `\n          <h1>New SR Fitness Award Nomination</h1>\n          <p>A new nomination has been submitted. Here are the details:</p>\n          <h2>Nominee Details:</h2>\n          <ul>\n            <li><strong>Category:</strong> ${category}</li>\n            <li><strong>Name:</strong> ${nomineeName}</li>\n            <li><strong>Phone:</strong> ${nomineePhone}</li>\n          </ul>\n          <h2>Reason for Nomination:</h2>\n          <p>${nominationReason}</p>\n          <hr />\n          <h2>Nominator Details:</h2>\n          <ul>\n            <li><strong>Name:</strong> ${nominatorName}</li>\n            <li><strong>Phone:</strong> ${nominatorPhone}</li>\n          </ul>\n        `,\n      });\n\n      if (error) {\n        // If email fails, return an error and do not save to DB\n        console.error('Resend API Error:', error);\n        return { success: false, error: 'Failed to send nomination email. Please try again.' };\n      }\n    } else {\n        console.warn('Resend API key is not configured. Skipping email sending.');\n    }\n\n    // 2. If email is sent (or skipped), save to Firestore\n    await addNomination(validatedFields.data);\n    \n    return { success: true, message: 'Nomination submitted successfully!' };\n\n  } catch (error) {\n    console.error('An unexpected error occurred in sendNominationEmail:', error);\n    return {\n      success: false,\n      error: 'An unexpected server error occurred. Please try again later.',\n    };\n  }\n}\n\n/**\n * Sends vote data to a Zapier webhook.\n */\nexport async function recordVote(voteData: z.infer<typeof voteSchema>) {\n  const validatedFields = voteSchema.safeParse(voteData);\n\n  if (!validatedFields.success) {\n    console.error(\"Invalid vote data for Zapier:\", validatedFields.error);\n    return {\n      success: false,\n      error: 'Invalid vote data provided.',\n    };\n  }\n\n  const zapierWebhookUrl = process.env.ZAPIER_VOTE_WEBHOOK_URL;\n  \n  if (!zapierWebhookUrl) {\n    console.error(\"ZAPIER_VOTE_WEBHOOK_URL is not set. Cannot send vote data.\");\n    return {\n      success: false,\n      error: 'Integration endpoint is not configured. Please contact support.',\n    };\n  }\n  \n  const payload = {\n    ...validatedFields.data,\n    timestamp: new Date().toISOString(),\n  };\n  \n  console.log(\"`recordVote` triggered. Attempting to send data to Zapier webhook:\", payload);\n\n  try {\n    const response = await fetch(zapierWebhookUrl, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(payload),\n    });\n\n    if (response.ok) {\n        console.log(\"Successfully sent vote data to Zapier. Response status:\", response.status);\n        return { success: true, message: \"Vote successfully recorded.\" };\n    } else {\n        const responseBody = await response.text();\n        console.error(`Zapier webhook call failed with status ${response.status}: ${responseBody}`);\n        return {\n          success: false,\n          error: `Failed to send vote data to the tracking system. Status: ${response.status}`,\n        };\n    }\n  } catch (error) {\n    console.error(\"Failed to trigger Zapier webhook due to a network or fetch error:\", error);\n    return {\n      success: false,\n      error: 'Could not connect to the vote tracking system.',\n    };\n  }\n}\n\nexport async function createPaystackPayment(paymentData: z.infer<typeof paystackPaymentRequestSchema>) {\n    const validatedFields = paystackPaymentRequestSchema.safeParse(paymentData);\n    if (!validatedFields.success) {\n        return { success: false, error: 'Invalid payment data provided.' };\n    }\n\n    if (!PAYSTACK_SECRET_KEY) {\n        console.error(\"Paystack secret key is not configured.\");\n        return { success: false, error: \"Payment gateway is not configured correctly.\" };\n    }\n\n    const { email, amount, metadata } = validatedFields.data;\n    \n    // Ensure the callback URL is correctly formed.\n    const callbackUrl = `${process.env.NEXT_PUBLIC_BASE_URL || 'http://localhost:9002'}/vote/callback`;\n\n\n    const body = {\n        email,\n        amount: amount * 100, // Paystack expects amount in kobo\n        callback_url: callbackUrl,\n        metadata,\n    };\n\n    try {\n        const response = await fetch('https://api.paystack.co/transaction/initialize', {\n            method: 'POST',\n            body: JSON.stringify(body),\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${PAYSTACK_SECRET_KEY}`,\n            }\n        });\n        \n        const data = await response.json();\n        \n        if (data.status) {\n            return {\n                success: true,\n                authorizationUrl: data.data.authorization_url,\n            };\n        } else {\n            console.error(\"Paystack API error:\", data.message);\n            return { success: false, error: data.message || 'Payment initiation failed.' };\n        }\n\n    } catch (error) {\n        console.error(\"Error calling Paystack API:\", error);\n        return { success: false, error: \"Could not connect to the payment gateway.\" };\n    }\n}\n\nexport async function verifyPaystackPayment(reference: string) {\n    if (!reference) {\n        return { success: false, error: 'No payment reference provided.', status: 'error' };\n    }\n    \n    // --- TEMPORARY TEST BLOCK ---\n    if (reference === 'test-zapier') {\n        console.log('--- ZAPIER TEST MODE ACTIVATED ---');\n        const testVoteData = {\n            contestantId: 'test-001',\n            contestantName: 'Test Contestant',\n            contestantCategory: 'Test Category',\n            numberOfVotes: 5,\n        };\n        const voteRecordResult = await recordVote(testVoteData);\n        if (voteRecordResult.success) {\n            return { \n                success: true, \n                message: 'TEST: Zapier webhook triggered successfully!',\n                status: 'success',\n            };\n        } else {\n            return { \n                success: false, \n                error: `TEST FAILED: ${voteRecordResult.error}`,\n                status: 'error',\n            };\n        }\n    }\n    // --- END TEMPORARY TEST BLOCK ---\n\n    if (!PAYSTACK_SECRET_KEY) {\n        console.error(\"Paystack secret key is not configured.\");\n        return { success: false, error: \"Payment gateway is not configured correctly.\", status: 'error' };\n    }\n\n    try {\n        const response = await fetch(`https://api.paystack.co/transaction/verify/${reference}`, {\n            method: 'GET',\n            headers: {\n                'Authorization': `Bearer ${PAYSTACK_SECRET_KEY}`,\n            }\n        });\n\n        const data = await response.json();\n\n        if (data.status && data.data.status === 'success') {\n            const { contestantId, contestantName, contestantCategory, numberOfVotes } = data.data.metadata;\n            \n            // This is the crucial step: record the vote only after successful verification.\n            const voteRecordResult = await recordVote({\n                contestantId,\n                contestantName,\n                contestantCategory,\n                numberOfVotes: Number(numberOfVotes),\n            });\n\n            if (voteRecordResult.success) {\n                return { \n                    success: true, \n                    message: 'Payment verified and vote recorded successfully!',\n                    status: 'success',\n                };\n            } else {\n                 return { \n                    success: false, \n                    error: `Payment was successful, but vote recording failed. Please contact support. Error: ${voteRecordResult.error}`,\n                    status: 'error',\n                };\n            }\n            \n        } else {\n            return { \n                success: false, \n                error: `Payment verification failed: ${data.data.gateway_response || 'Unknown reason.'}`,\n                status: data.data.status || 'failed',\n            };\n        }\n\n    } catch (error) {\n        console.error(\"Error verifying Paystack payment:\", error);\n        return { success: false, error: \"Could not connect to the payment gateway for verification.\", status: 'error' };\n    }\n}\n\n\nexport async function createRemitaPayment(paymentData: z.infer<typeof remitaPaymentRequestSchema>) {\n    const validatedFields = remitaPaymentRequestSchema.safeParse(paymentData);\n    if (!validatedFields.success) {\n        return { success: false, error: \"Invalid Remita payment data.\" };\n    }\n\n    // Remita API key is missing. Assuming it's also a subscription key, similar to the Wema one that was removed.\n    const REMITA_SUBSCRIPTION_KEY = process.env.REMITA_SUBSCRIPTION_KEY;\n    if (!REMITA_SUBSCRIPTION_KEY) {\n      console.error(\"Remita subscription key is not set.\");\n      return { success: false, error: \"Payment gateway is not configured correctly.\" };\n    }\n\n\n    const { amount, charge, transactionReference, customerEmail, customerName, customerPhoneNumber, description, contestantId, contestantName, contestantCategory, numberOfVotes } = validatedFields.data;\n\n    const body = {\n        // ... (Remita API specific body, placeholders for simplicity)\n        channelId: \"string\", \n        cif: \"string\", \n        customerAccount: \"string\", \n        amount: amount,\n        charge: charge,\n        transactionReference: transactionReference,\n        customerEmail: customerEmail,\n        customerPhoneNumber: customerPhoneNumber,\n        customerName: customerName,\n        rrr: \"string\", \n        payerEmail: customerEmail,\n        payerName: customerName,\n        payerNumber: customerPhoneNumber,\n        description: description,\n        billAuthOptions: {\n            pin: \"string\",\n            otp: \"string\",\n            biometricPolicy: \"string\",\n            biometricToken: \"string\",\n            platformTransactionReference: \"string\",\n            authenticationType: 0\n        }\n    };\n\n    try {\n        const response = await fetch('https://wema-alatdev-apimgt.azure-api.net/remita-payments/api/RemitaPayment/PayRemitaBill', {\n            method: 'POST',\n            body: JSON.stringify(body),\n            headers: {\n                'Content-Type': 'application/json',\n                'Cache-Control': 'no-cache',\n                'Ocp-Apim-Subscription-Key': REMITA_SUBSCRIPTION_KEY,\n            }\n        });\n\n        const responseText = await response.text();\n        console.log(\"Remita PayRemitaBill response status:\", response.status);\n        console.log(\"Remita PayRemitaBill response body:\", responseText);\n        \n        if (response.ok) {\n            const voteData = { contestantId, contestantName, contestantCategory, numberOfVotes };\n            const voteRecordResult = await recordVote(voteData);\n            if (voteRecordResult.success) {\n                return { success: true, message: \"Remita payment processed and vote recorded successfully.\", data: JSON.parse(responseText) };\n            } else {\n                return { success: false, error: `Remita payment succeeded, but vote recording failed: ${voteRecordResult.error}` };\n            }\n        } else {\n             if (response.status === 500) {\n                 return { success: false, error: `Remita payment failed due to an internal server error on the gateway. Please try again later or contact support.` };\n             }\n            return { success: false, error: `Remita payment failed: ${responseText}` };\n        }\n\n    } catch(error) {\n        console.error(\"Error calling Remita PayRemitaBill API:\", error);\n        return { success: false, error: \"Could not connect to the Remita payment gateway.\" };\n    }\n}\n\nexport async function printRemitaReceipt(receiptData: z.infer<typeof remitaReceiptSchema>) {\n    const validatedFields = remitaReceiptSchema.safeParse(receiptData);\n    if (!validatedFields.success) {\n        return { success: false, error: \"Invalid Remita receipt data.\" };\n    }\n    \n    // Remita API key is missing. Assuming it's also a subscription key.\n    const REMITA_SUBSCRIPTION_KEY = process.env.REMITA_SUBSCRIPTION_KEY;\n    if (!REMITA_SUBSCRIPTION_KEY) {\n      console.error(\"Remita subscription key is not set.\");\n      return { success: false, error: \"Payment gateway is not configured correctly.\" };\n    }\n\n    const { rrr } = validatedFields.data;\n\n    const remitaUrl = `https://wema-alatdev-apimgt.azure-api.net/remita-payments/api/RemitaPayment/PrintRemitaReceipt/${rrr}`;\n\n    try {\n        const response = await fetch(remitaUrl, {\n            method: 'GET',\n            headers: {\n                'Cache-Control': 'no-cache',\n                'Ocp-Apim-Subscription-Key': REMITA_SUBSCRIPTION_KEY,\n            }\n        });\n\n        const responseText = await response.text();\n        console.log(\"Remita PrintRemitaReceipt response status:\", response.status);\n        console.log(\"Remita PrintRemitaReceipt response body:\", responseText);\n        \n        if (response.ok) {\n            return { success: true, receiptData: responseText };\n        } else {\n            return { success: false, error: `Failed to fetch Remita receipt: ${responseText}` };\n        }\n\n    } catch(error) {\n        console.error(\"Error calling Remita PrintRemitaReceipt API:\", error);\n        return { success: false, error: \"Could not connect to the Remita payment gateway to print receipt.\" };\n    }\n}\n\n\nexport async function validateRemitaRrr(validationData: z.infer<typeof remitaRrrValidationSchema>) {\n    const validatedFields = remitaRrrValidationSchema.safeParse(validationData);\n    if (!validatedFields.success) {\n        return { success: false, error: \"Invalid Remita RRR validation data.\" };\n    }\n\n    // Remita API key is missing. Assuming it's also a subscription key.\n    const REMITA_SUBSCRIPTION_KEY = process.env.REMITA_SUBSCRIPTION_KEY;\n    if (!REMITA_SUBSCRIPTION_KEY) {\n      console.error(\"Remita subscription key is not set.\");\n      return { success: false, error: \"Payment gateway is not configured correctly.\" };\n    }\n    \n    const { rrr, channelId } = validatedFields.data;\n\n    const remitaUrl = `https://wema-alatdev-apimgt.azure-api.net/remita-payments/api/RemitaPayment/ValidateRrr/${rrr}/${channelId}`;\n\n    try {\n        const response = await fetch(remitaUrl, {\n            method: 'GET',\n            headers: {\n                'Cache-Control': 'no-cache',\n                'Ocp-Apim-Subscription-Key': REMITA_SUBSCRIPTION_KEY,\n            }\n        });\n\n        const responseText = await response.text();\n        console.log(\"Remita ValidateRrr response status:\", response.status);\n        console.log(\"Remita ValidateRrr response body:\", responseText);\n        \n        if (response.ok) {\n            return { success: true, message: \"Remita RRR validated successfully.\", data: JSON.parse(responseText) };\n        } else {\n            return { success: false, error: `Failed to validate Remita RRR: ${responseText}` };\n        }\n\n    } catch(error) {\n        console.error(\"Error calling Remita ValidateRrr API:\", error);\n        return { success: false, error: \"Could not connect to the Remita payment gateway to validate RRR.\" };\n    }\n}\n\n    \n    "],"names":[],"mappings":";;;;;;IAkUsB,sBAAA,WAAA,GAAA,CAAA,GAAA,yNAAA,CAAA,wBAAA,EAAA,8CAAA,yNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,yNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 126, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/actions.ts"],"sourcesContent":["\n'use server';\n\nimport { z } from 'zod';\nimport { addNomination } from '@/services/firestore';\nimport { Resend } from 'resend';\nimport { redirect } from 'next/navigation';\n\n// Explicitly read environment variables at the top level\nconst NEXT_PUBLIC_BASE_URL = process.env.NEXT_PUBLIC_BASE_URL || 'http://localhost:9002';\nconst RESEND_API_KEY = process.env.RESEND_API_KEY;\nconst PAYSTACK_SECRET_KEY = process.env.PAYSTACK_SECRET_KEY;\n// We will read the Zapier URL inside the function to ensure it's not missed.\n\nconst nominationFormSchema = z.object({\n  category: z.string(),\n  nomineeName: z.string(),\n  nomineePhone: z.string(),\n  nominationReason: z.string(),\n  nominatorName: z.string(),\n  nominatorPhone: z.string(),\n});\n\nconst voteSchema = z.object({\n  contestantId: z.string(),\n  contestantName: z.string(),\n  contestantCategory: z.string(),\n  numberOfVotes: z.number().int().positive(),\n});\n\nconst remitaPaymentRequestSchema = z.object({\n  amount: z.number(),\n  charge: z.number(),\n  transactionReference: z.string(),\n  customerEmail: z.string().email(),\n  customerName: z.string(),\n  customerPhoneNumber: z.string(),\n  description: z.string(),\n  // Pass along vote data for recording\n  contestantId: z.string(),\n  contestantName: z.string(),\n  contestantCategory: z.string(),\n  numberOfVotes: z.number(),\n});\n\nconst remitaReceiptSchema = z.object({\n  rrr: z.string(),\n});\n\nconst remitaRrrValidationSchema = z.object({\n  rrr: z.string(),\n  channelId: z.string(),\n});\n\nconst paystackPaymentRequestSchema = z.object({\n  email: z.string().email(),\n  amount: z.number(),\n  metadata: z.object({\n    contestantId: z.string(),\n    contestantName: z.string(),\n    contestantCategory: z.string(),\n    numberOfVotes: z.number(),\n  }),\n});\n\n\nexport async function sendNominationEmail(formData: z.infer<typeof nominationFormSchema>) {\n  const validatedFields = nominationFormSchema.safeParse(formData);\n\n  if (!validatedFields.success) {\n    return { success: false, error: 'Invalid form data.' };\n  }\n  \n  try {\n    const { category, nomineeName, nomineePhone, nominationReason, nominatorName, nominatorPhone } = validatedFields.data;\n\n    // 1. Attempt to send email\n    if (RESEND_API_KEY) {\n      const resend = new Resend(RESEND_API_KEY);\n      const { data, error } = await resend.emails.send({\n        from: 'SR Fitness Awards <noreply@srfitness.com.ng>',\n        to: ['sampson07@outlook.com', 'srfitness247@gmail.com'],\n        subject: 'New Award Nomination Received!',\n        html: `\n          <h1>New SR Fitness Award Nomination</h1>\n          <p>A new nomination has been submitted. Here are the details:</p>\n          <h2>Nominee Details:</h2>\n          <ul>\n            <li><strong>Category:</strong> ${category}</li>\n            <li><strong>Name:</strong> ${nomineeName}</li>\n            <li><strong>Phone:</strong> ${nomineePhone}</li>\n          </ul>\n          <h2>Reason for Nomination:</h2>\n          <p>${nominationReason}</p>\n          <hr />\n          <h2>Nominator Details:</h2>\n          <ul>\n            <li><strong>Name:</strong> ${nominatorName}</li>\n            <li><strong>Phone:</strong> ${nominatorPhone}</li>\n          </ul>\n        `,\n      });\n\n      if (error) {\n        // If email fails, return an error and do not save to DB\n        console.error('Resend API Error:', error);\n        return { success: false, error: 'Failed to send nomination email. Please try again.' };\n      }\n    } else {\n        console.warn('Resend API key is not configured. Skipping email sending.');\n    }\n\n    // 2. If email is sent (or skipped), save to Firestore\n    await addNomination(validatedFields.data);\n    \n    return { success: true, message: 'Nomination submitted successfully!' };\n\n  } catch (error) {\n    console.error('An unexpected error occurred in sendNominationEmail:', error);\n    return {\n      success: false,\n      error: 'An unexpected server error occurred. Please try again later.',\n    };\n  }\n}\n\n/**\n * Sends vote data to a Zapier webhook.\n */\nexport async function recordVote(voteData: z.infer<typeof voteSchema>) {\n  const validatedFields = voteSchema.safeParse(voteData);\n\n  if (!validatedFields.success) {\n    console.error(\"Invalid vote data for Zapier:\", validatedFields.error);\n    return {\n      success: false,\n      error: 'Invalid vote data provided.',\n    };\n  }\n\n  const zapierWebhookUrl = process.env.ZAPIER_VOTE_WEBHOOK_URL;\n  \n  if (!zapierWebhookUrl) {\n    console.error(\"ZAPIER_VOTE_WEBHOOK_URL is not set. Cannot send vote data.\");\n    return {\n      success: false,\n      error: 'Integration endpoint is not configured. Please contact support.',\n    };\n  }\n  \n  const payload = {\n    ...validatedFields.data,\n    timestamp: new Date().toISOString(),\n  };\n  \n  console.log(\"`recordVote` triggered. Attempting to send data to Zapier webhook:\", payload);\n\n  try {\n    const response = await fetch(zapierWebhookUrl, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(payload),\n    });\n\n    if (response.ok) {\n        console.log(\"Successfully sent vote data to Zapier. Response status:\", response.status);\n        return { success: true, message: \"Vote successfully recorded.\" };\n    } else {\n        const responseBody = await response.text();\n        console.error(`Zapier webhook call failed with status ${response.status}: ${responseBody}`);\n        return {\n          success: false,\n          error: `Failed to send vote data to the tracking system. Status: ${response.status}`,\n        };\n    }\n  } catch (error) {\n    console.error(\"Failed to trigger Zapier webhook due to a network or fetch error:\", error);\n    return {\n      success: false,\n      error: 'Could not connect to the vote tracking system.',\n    };\n  }\n}\n\nexport async function createPaystackPayment(paymentData: z.infer<typeof paystackPaymentRequestSchema>) {\n    const validatedFields = paystackPaymentRequestSchema.safeParse(paymentData);\n    if (!validatedFields.success) {\n        return { success: false, error: 'Invalid payment data provided.' };\n    }\n\n    if (!PAYSTACK_SECRET_KEY) {\n        console.error(\"Paystack secret key is not configured.\");\n        return { success: false, error: \"Payment gateway is not configured correctly.\" };\n    }\n\n    const { email, amount, metadata } = validatedFields.data;\n    \n    // Ensure the callback URL is correctly formed.\n    const callbackUrl = `${process.env.NEXT_PUBLIC_BASE_URL || 'http://localhost:9002'}/vote/callback`;\n\n\n    const body = {\n        email,\n        amount: amount * 100, // Paystack expects amount in kobo\n        callback_url: callbackUrl,\n        metadata,\n    };\n\n    try {\n        const response = await fetch('https://api.paystack.co/transaction/initialize', {\n            method: 'POST',\n            body: JSON.stringify(body),\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${PAYSTACK_SECRET_KEY}`,\n            }\n        });\n        \n        const data = await response.json();\n        \n        if (data.status) {\n            return {\n                success: true,\n                authorizationUrl: data.data.authorization_url,\n            };\n        } else {\n            console.error(\"Paystack API error:\", data.message);\n            return { success: false, error: data.message || 'Payment initiation failed.' };\n        }\n\n    } catch (error) {\n        console.error(\"Error calling Paystack API:\", error);\n        return { success: false, error: \"Could not connect to the payment gateway.\" };\n    }\n}\n\nexport async function verifyPaystackPayment(reference: string) {\n    if (!reference) {\n        return { success: false, error: 'No payment reference provided.', status: 'error' };\n    }\n    \n    // --- TEMPORARY TEST BLOCK ---\n    if (reference === 'test-zapier') {\n        console.log('--- ZAPIER TEST MODE ACTIVATED ---');\n        const testVoteData = {\n            contestantId: 'test-001',\n            contestantName: 'Test Contestant',\n            contestantCategory: 'Test Category',\n            numberOfVotes: 5,\n        };\n        const voteRecordResult = await recordVote(testVoteData);\n        if (voteRecordResult.success) {\n            return { \n                success: true, \n                message: 'TEST: Zapier webhook triggered successfully!',\n                status: 'success',\n            };\n        } else {\n            return { \n                success: false, \n                error: `TEST FAILED: ${voteRecordResult.error}`,\n                status: 'error',\n            };\n        }\n    }\n    // --- END TEMPORARY TEST BLOCK ---\n\n    if (!PAYSTACK_SECRET_KEY) {\n        console.error(\"Paystack secret key is not configured.\");\n        return { success: false, error: \"Payment gateway is not configured correctly.\", status: 'error' };\n    }\n\n    try {\n        const response = await fetch(`https://api.paystack.co/transaction/verify/${reference}`, {\n            method: 'GET',\n            headers: {\n                'Authorization': `Bearer ${PAYSTACK_SECRET_KEY}`,\n            }\n        });\n\n        const data = await response.json();\n\n        if (data.status && data.data.status === 'success') {\n            const { contestantId, contestantName, contestantCategory, numberOfVotes } = data.data.metadata;\n            \n            // This is the crucial step: record the vote only after successful verification.\n            const voteRecordResult = await recordVote({\n                contestantId,\n                contestantName,\n                contestantCategory,\n                numberOfVotes: Number(numberOfVotes),\n            });\n\n            if (voteRecordResult.success) {\n                return { \n                    success: true, \n                    message: 'Payment verified and vote recorded successfully!',\n                    status: 'success',\n                };\n            } else {\n                 return { \n                    success: false, \n                    error: `Payment was successful, but vote recording failed. Please contact support. Error: ${voteRecordResult.error}`,\n                    status: 'error',\n                };\n            }\n            \n        } else {\n            return { \n                success: false, \n                error: `Payment verification failed: ${data.data.gateway_response || 'Unknown reason.'}`,\n                status: data.data.status || 'failed',\n            };\n        }\n\n    } catch (error) {\n        console.error(\"Error verifying Paystack payment:\", error);\n        return { success: false, error: \"Could not connect to the payment gateway for verification.\", status: 'error' };\n    }\n}\n\n\nexport async function createRemitaPayment(paymentData: z.infer<typeof remitaPaymentRequestSchema>) {\n    const validatedFields = remitaPaymentRequestSchema.safeParse(paymentData);\n    if (!validatedFields.success) {\n        return { success: false, error: \"Invalid Remita payment data.\" };\n    }\n\n    // Remita API key is missing. Assuming it's also a subscription key, similar to the Wema one that was removed.\n    const REMITA_SUBSCRIPTION_KEY = process.env.REMITA_SUBSCRIPTION_KEY;\n    if (!REMITA_SUBSCRIPTION_KEY) {\n      console.error(\"Remita subscription key is not set.\");\n      return { success: false, error: \"Payment gateway is not configured correctly.\" };\n    }\n\n\n    const { amount, charge, transactionReference, customerEmail, customerName, customerPhoneNumber, description, contestantId, contestantName, contestantCategory, numberOfVotes } = validatedFields.data;\n\n    const body = {\n        // ... (Remita API specific body, placeholders for simplicity)\n        channelId: \"string\", \n        cif: \"string\", \n        customerAccount: \"string\", \n        amount: amount,\n        charge: charge,\n        transactionReference: transactionReference,\n        customerEmail: customerEmail,\n        customerPhoneNumber: customerPhoneNumber,\n        customerName: customerName,\n        rrr: \"string\", \n        payerEmail: customerEmail,\n        payerName: customerName,\n        payerNumber: customerPhoneNumber,\n        description: description,\n        billAuthOptions: {\n            pin: \"string\",\n            otp: \"string\",\n            biometricPolicy: \"string\",\n            biometricToken: \"string\",\n            platformTransactionReference: \"string\",\n            authenticationType: 0\n        }\n    };\n\n    try {\n        const response = await fetch('https://wema-alatdev-apimgt.azure-api.net/remita-payments/api/RemitaPayment/PayRemitaBill', {\n            method: 'POST',\n            body: JSON.stringify(body),\n            headers: {\n                'Content-Type': 'application/json',\n                'Cache-Control': 'no-cache',\n                'Ocp-Apim-Subscription-Key': REMITA_SUBSCRIPTION_KEY,\n            }\n        });\n\n        const responseText = await response.text();\n        console.log(\"Remita PayRemitaBill response status:\", response.status);\n        console.log(\"Remita PayRemitaBill response body:\", responseText);\n        \n        if (response.ok) {\n            const voteData = { contestantId, contestantName, contestantCategory, numberOfVotes };\n            const voteRecordResult = await recordVote(voteData);\n            if (voteRecordResult.success) {\n                return { success: true, message: \"Remita payment processed and vote recorded successfully.\", data: JSON.parse(responseText) };\n            } else {\n                return { success: false, error: `Remita payment succeeded, but vote recording failed: ${voteRecordResult.error}` };\n            }\n        } else {\n             if (response.status === 500) {\n                 return { success: false, error: `Remita payment failed due to an internal server error on the gateway. Please try again later or contact support.` };\n             }\n            return { success: false, error: `Remita payment failed: ${responseText}` };\n        }\n\n    } catch(error) {\n        console.error(\"Error calling Remita PayRemitaBill API:\", error);\n        return { success: false, error: \"Could not connect to the Remita payment gateway.\" };\n    }\n}\n\nexport async function printRemitaReceipt(receiptData: z.infer<typeof remitaReceiptSchema>) {\n    const validatedFields = remitaReceiptSchema.safeParse(receiptData);\n    if (!validatedFields.success) {\n        return { success: false, error: \"Invalid Remita receipt data.\" };\n    }\n    \n    // Remita API key is missing. Assuming it's also a subscription key.\n    const REMITA_SUBSCRIPTION_KEY = process.env.REMITA_SUBSCRIPTION_KEY;\n    if (!REMITA_SUBSCRIPTION_KEY) {\n      console.error(\"Remita subscription key is not set.\");\n      return { success: false, error: \"Payment gateway is not configured correctly.\" };\n    }\n\n    const { rrr } = validatedFields.data;\n\n    const remitaUrl = `https://wema-alatdev-apimgt.azure-api.net/remita-payments/api/RemitaPayment/PrintRemitaReceipt/${rrr}`;\n\n    try {\n        const response = await fetch(remitaUrl, {\n            method: 'GET',\n            headers: {\n                'Cache-Control': 'no-cache',\n                'Ocp-Apim-Subscription-Key': REMITA_SUBSCRIPTION_KEY,\n            }\n        });\n\n        const responseText = await response.text();\n        console.log(\"Remita PrintRemitaReceipt response status:\", response.status);\n        console.log(\"Remita PrintRemitaReceipt response body:\", responseText);\n        \n        if (response.ok) {\n            return { success: true, receiptData: responseText };\n        } else {\n            return { success: false, error: `Failed to fetch Remita receipt: ${responseText}` };\n        }\n\n    } catch(error) {\n        console.error(\"Error calling Remita PrintRemitaReceipt API:\", error);\n        return { success: false, error: \"Could not connect to the Remita payment gateway to print receipt.\" };\n    }\n}\n\n\nexport async function validateRemitaRrr(validationData: z.infer<typeof remitaRrrValidationSchema>) {\n    const validatedFields = remitaRrrValidationSchema.safeParse(validationData);\n    if (!validatedFields.success) {\n        return { success: false, error: \"Invalid Remita RRR validation data.\" };\n    }\n\n    // Remita API key is missing. Assuming it's also a subscription key.\n    const REMITA_SUBSCRIPTION_KEY = process.env.REMITA_SUBSCRIPTION_KEY;\n    if (!REMITA_SUBSCRIPTION_KEY) {\n      console.error(\"Remita subscription key is not set.\");\n      return { success: false, error: \"Payment gateway is not configured correctly.\" };\n    }\n    \n    const { rrr, channelId } = validatedFields.data;\n\n    const remitaUrl = `https://wema-alatdev-apimgt.azure-api.net/remita-payments/api/RemitaPayment/ValidateRrr/${rrr}/${channelId}`;\n\n    try {\n        const response = await fetch(remitaUrl, {\n            method: 'GET',\n            headers: {\n                'Cache-Control': 'no-cache',\n                'Ocp-Apim-Subscription-Key': REMITA_SUBSCRIPTION_KEY,\n            }\n        });\n\n        const responseText = await response.text();\n        console.log(\"Remita ValidateRrr response status:\", response.status);\n        console.log(\"Remita ValidateRrr response body:\", responseText);\n        \n        if (response.ok) {\n            return { success: true, message: \"Remita RRR validated successfully.\", data: JSON.parse(responseText) };\n        } else {\n            return { success: false, error: `Failed to validate Remita RRR: ${responseText}` };\n        }\n\n    } catch(error) {\n        console.error(\"Error calling Remita ValidateRrr API:\", error);\n        return { success: false, error: \"Could not connect to the Remita payment gateway to validate RRR.\" };\n    }\n}\n\n    \n    "],"names":[],"mappings":";;;;;;IAwLsB,wBAAA,WAAA,GAAA,CAAA,GAAA,yNAAA,CAAA,wBAAA,EAAA,8CAAA,yNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,yNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/tabs.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,OAAO,mKAAA,CAAA,OAAkB;AAE/B,MAAM,yBAAW,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,mKAAA,CAAA,OAAkB;QACjB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,8FACA;QAED,GAAG,KAAK;;;;;;;AAGb,SAAS,WAAW,GAAG,mKAAA,CAAA,OAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,mKAAA,CAAA,UAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,uYACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,mKAAA,CAAA,UAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,mKAAA,CAAA,UAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,mIACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,mKAAA,CAAA,UAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 208, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/checkout/page.tsx"],"sourcesContent":["\n\n\"use client\";\n\nimport { Suspense, useTransition, useState } from 'react';\nimport Image from 'next/image';\nimport { useSearchParams, useRouter } from 'next/navigation';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription, CardFooter } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { ArrowLeft, Loader2, CheckCircle, ShieldCheck, CreditCard } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport Link from 'next/link';\nimport { createRemitaPayment, createPaystackPayment } from '@/app/actions';\nimport { Input } from '@/components/ui/input';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Label } from '@/components/ui/label';\n\nconst VOTE_COST_PER_VOTE = 100;\n\nfunction CheckoutView() {\n    const searchParams = useSearchParams();\n    const router = useRouter();\n    const { toast } = useToast();\n    const [isPending, startTransition] = useTransition();\n\n    // Form state for Paystack and Remita\n    const [customerName, setCustomerName] = useState('');\n    const [customerEmail, setCustomerEmail] = useState('');\n    const [customerPhone, setCustomerPhone] = useState('');\n\n    const contestantId = searchParams.get('id');\n    const contestantName = searchParams.get('name') || 'the selected contestant';\n    const contestantCategory = searchParams.get('category') || 'their category';\n    const numberOfVotes = parseInt(searchParams.get('votes') || '1', 10);\n    const contestantImage = searchParams.get('image') || '/SR.jpg'; // Get image from URL\n    \n    const totalVoteCost = VOTE_COST_PER_VOTE * (numberOfVotes - (\n        numberOfVotes === 12 ? 2 :\n        numberOfVotes === 53 ? 3 :\n        numberOfVotes === 105 ? 5 :\n        numberOfVotes === 510 ? 10 :\n        numberOfVotes === 1020 ? 20 : 0\n    ));\n\n    \n    const handlePaystackPayment = () => {\n        if (!contestantId || !customerEmail) {\n            toast({ title: \"Email is required\", description: \"Please enter your email address to pay with Paystack.\", variant: \"destructive\"});\n            return;\n        }\n\n        startTransition(async () => {\n            const result = await createPaystackPayment({\n                email: customerEmail,\n                amount: totalVoteCost,\n                metadata: {\n                    contestantId,\n                    contestantName,\n                    contestantCategory,\n                    numberOfVotes\n                }\n            });\n\n            if (result.success && result.authorizationUrl) {\n                // Redirect to Paystack's payment page\n                window.location.href = result.authorizationUrl;\n            } else {\n                toast({\n                    title: \"Paystack Error\",\n                    description: result.error || \"Could not initiate Paystack payment. Please try again.\",\n                    variant: \"destructive\",\n                });\n            }\n        });\n    };\n    \n    const handleRemitaPayment = () => {\n        if (!contestantId || !customerName || !customerEmail || !customerPhone) {\n            toast({ title: \"Missing Information\", description: \"Please fill out all fields for the Remita payment.\", variant: \"destructive\"});\n            return;\n        }\n\n        startTransition(async () => {\n            const transactionReference = `SRF-VOTE-REMITA-${contestantId}-${Date.now()}`;\n            const result = await createRemitaPayment({\n                amount: totalVoteCost,\n                charge: 0, // Assuming no extra charge for now\n                transactionReference,\n                customerEmail: customerEmail,\n                customerName: customerName,\n                customerPhoneNumber: customerPhone,\n                description: `Vote for ${contestantName}`,\n                // Pass vote data through for recording\n                contestantId,\n                contestantName,\n                contestantCategory,\n                numberOfVotes,\n            });\n\n             if (result.success) {\n                toast({\n                    title: \"Remita Payment Successful\",\n                    description: \"Your payment has been processed and your vote recorded.\",\n                });\n                // In a real scenario, you might redirect to a Remita page or handle their response.\n                // For now, we'll go to the success view.\n                router.push(`/vote/callback?status=success&ref=${transactionReference}`);\n            } else {\n                toast({\n                    title: \"Remita Payment Failed\",\n                    description: result.error || \"Could not process Remita payment. Please try again.\",\n                    variant: \"destructive\",\n                });\n            }\n        });\n    };\n\n    if (!contestantId || !contestantName || !contestantCategory) {\n        return (\n            <Card className=\"bg-zinc-900/50 border-destructive/50 text-white shadow-2xl shadow-destructive/10 text-center\">\n                <CardHeader>\n                    <CardTitle className=\"font-headline text-3xl text-destructive\">Invalid Vote Details</CardTitle>\n                    <CardDescription className=\"text-zinc-300\">\n                        The contestant information is missing or incomplete.\n                    </CardDescription>\n                </CardHeader>\n                <CardContent>\n                    <p className=\"text-zinc-400 mb-6\">Please go back to the voting page and select a contestant again.</p>\n                     <Button asChild className=\"bg-amber-500 text-black hover:bg-amber-400\">\n                        <Link href=\"/vote\">\n                            <ArrowLeft className=\"mr-2 h-4 w-4\" /> Go Back to Vote\n                        </Link>\n                    </Button>\n                </CardContent>\n            </Card>\n        );\n    }\n    \n    return (\n        <Card className=\"bg-zinc-900/50 border-amber-400/30 text-white shadow-2xl shadow-amber-500/10\">\n            <CardHeader>\n                <CardTitle className=\"font-headline text-3xl text-amber-400\">Confirm Your Vote</CardTitle>\n                <CardDescription className=\"text-zinc-400\">Please review the details below and choose a payment method.</CardDescription>\n            </CardHeader>\n            <CardContent>\n                <div className=\"flex items-center space-x-4 mb-6\">\n                    <Image src={contestantImage} alt={contestantName} width={100} height={125} className=\"rounded-lg border-2 border-amber-400/50 object-cover\" />\n                    <div>\n                        <h3 className=\"text-2xl font-bold text-white\">{contestantName}</h3>\n                        <p className=\"text-amber-300\">{contestantCategory}</p>\n                        <p className=\"text-sm text-zinc-300 mt-1\">Number of Votes: <span className=\"font-bold\">{numberOfVotes}</span></p>\n                    </div>\n                </div>\n                <div className=\"border-t border-zinc-700 pt-4 flex justify-between items-center text-xl\">\n                    <span className=\"text-zinc-300\">Total Cost:</span>\n                    <span className=\"font-bold text-amber-400\">N{totalVoteCost.toFixed(2)}</span>\n                </div>\n                \n                <Tabs defaultValue=\"paystack\" className=\"w-full mt-8\">\n                    <TabsList className=\"grid w-full grid-cols-2 bg-zinc-800/50\">\n                        <TabsTrigger value=\"paystack\" className=\"data-[state=active]:bg-amber-500/10 data-[state=active]:text-amber-300 text-zinc-400\">\n                             <Image src=\"/paystack.png\" width={24} height={24} alt=\"Paystack\" className=\"mr-2\"/> Paystack\n                        </TabsTrigger>\n                        <TabsTrigger value=\"remita\" className=\"data-[state=active]:bg-amber-500/10 data-[state=active]:text-amber-300 text-zinc-400\" disabled><CreditCard className=\"mr-2 h-4 w-4\"/> Remita (Soon)</TabsTrigger>\n                    </TabsList>\n\n                    <TabsContent value=\"paystack\" className=\"mt-4 space-y-4\">\n                        <p className=\"text-xs text-zinc-500 mb-2 text-center\">\n                            Securely pay with Card, Bank, USSD, etc. via Paystack.\n                        </p>\n                        <div className=\"space-y-2\">\n                             <Label htmlFor=\"customerEmail\" className=\"text-zinc-400\">Email Address</Label>\n                            <Input id=\"customerEmail\" type=\"email\" placeholder=\"your.email@example.com\" value={customerEmail} onChange={e => setCustomerEmail(e.target.value)} className=\"bg-zinc-800 border-zinc-700 focus:ring-amber-400\"/>\n                        </div>\n                        <Button\n                            size=\"lg\"\n                            className=\"w-full bg-amber-500 text-black font-bold text-lg hover:bg-amber-400 disabled:bg-zinc-600\"\n                            onClick={handlePaystackPayment}\n                            disabled={isPending || !customerEmail}\n                        >\n                             {isPending ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : null}\n                             {isPending ? 'Processing...' : 'Pay with Paystack'}\n                        </Button>\n                    </TabsContent>\n\n                    <TabsContent value=\"remita\" className=\"mt-4 space-y-4\">\n                       <div className=\"text-center text-zinc-500 p-4\">\n                        Remita payment option will be available soon.\n                       </div>\n                    </TabsContent>\n                </Tabs>\n            </CardContent>\n            <CardFooter>\n                 <Button asChild variant=\"link\" className=\"text-zinc-400 hover:text-amber-300\" onClick={() => router.back()}>\n                    <Link href=\"/vote\">\n                        <ArrowLeft className=\"mr-2 h-4 w-4\" /> Go Back\n                    </Link>\n                </Button>\n            </CardFooter>\n        </Card>\n    );\n}\n\nexport default function CheckoutPage() {\n    return (\n        <div className=\"bg-black text-white min-h-screen\" style={{\n            backgroundImage: `url('/black-bg.jpeg')`,\n            backgroundSize: 'cover',\n            backgroundPosition: 'center',\n            backgroundAttachment: 'fixed',\n        }}>\n            <div className=\"bg-black/80 backdrop-blur-sm min-h-screen flex items-center justify-center\">\n                <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24\">\n                     <header className=\"text-center mb-12\">\n                        <Image src=\"/SR.jpg\" alt=\"SR Fitness Awards Logo\" width={96} height={96} className=\"h-24 w-24 mx-auto mb-4 rounded-full\" data-ai-hint=\"awards logo\" />\n                        <h1 className=\"font-headline text-5xl text-amber-400\">Vote Checkout</h1>\n                    </header>\n                    <main>\n                      <Suspense fallback={\n                          <div className=\"flex justify-center items-center h-64\">\n                              <Loader2 className=\"h-12 w-12 text-amber-400 animate-spin\" />\n                          </div>\n                      }>\n                        <CheckoutView />\n                      </Suspense>\n                    </main>\n                </div>\n            </div>\n        </div>\n    );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}